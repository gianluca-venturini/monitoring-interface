<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <meta name="description" content="">

    <title>Monitoring Interface</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href="css/page.css" rel="stylesheet" type="text/css">
    <link href="css/cursor.css" rel="stylesheet" type="text/css">
    <link href="css/ui-connection-view.css" rel="stylesheet" type="text/css">
    <link href="css/ui-application.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/highlight.default.min.css">

    <script src="js/lib/d3.v3.min.js" charset="utf-8"></script>
    <script src="js/lib/underscore-min.js" charset="utf-8"></script>
    <script src="js/lib/jquery-1.10.0.min.js" charset="utf-8"></script>
    <script src="js/lib/bootstrap.min.js" charset="utf-8"></script>
    <script src="js/lib/highlight.min.js"></script>

    <script src="js/lib/react-with-addons-0.12.2.js"></script>
    <script src="js/lib/JSXTransformer-0.12.2.js"></script>

    <script src="js/d3/layout/radial-layout.js" charset="utf-8"></script>
    <script src="js/d3/layout/grid-layout.js" charset="utf-8"></script>

    <script src="js/notification/notifications.js" charset="utf-8"></script>
    <script src="js/notification/notification-center.js" charset="utf-8"></script>

    <script src="js/model/applications-model.js" charset="utf-8"></script>
    <script src="js/model/messages-model.js" charset="utf-8"></script>

    <script src="js/view-controller/view-controller.js" charset="utf-8"></script>
    <script src="js/view-controller/window-view-controller.js" charset="utf-8"></script>
    <script src="js/view-controller/application-view-controller.js" charset="utf-8"></script>
    <script src="js/view-controller/instance-view-controller.js" charset="utf-8"></script>

    <script src="js/d3/plugin/graphics.js" charset="utf-8"></script>
    <script src="js/d3/plugin/tab-table.js" charset="utf-8"></script>

    <script src="js/d3/ui/animations.js" charset="utf-8"></script>
    <script src="js/d3/ui/ui-element.js" charset="utf-8"></script>
    <script src="js/d3/ui/ui-legend.js" charset="utf-8"></script>
    <script src="js/d3/ui/ui-notification.js" charset="utf-8"></script>
    <script src="js/d3/ui/ui-application.js" charset="utf-8"></script>
    <script src="js/d3/ui/ui-connection-view.js" charset="utf-8"></script>
    <script src="js/d3/ui/ui-tab.js" charset="utf-8"></script>

    <script type="text/jsx" src="js/react/ui-messages.js" charset="utf-8"></script>

    <!-- Scripts -->
    <script src="bower_components/bower-mqttws/mqttws31.js" type="text/javascript" charset="utf-8"></script>
    <script src="bower_components/nutella_lib/nutella_lib.js" type="text/javascript" charset="utf-8"></script>

</head>
<body style="margin: 0">

<svg id="container"></svg>

<!-- Modal -->
<div class="modal fade" id="messageDisplay" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

</div>

</body>

<script  type="text/jsx">
    // Initialize react components here

    React.render(
            <UIMessages/>,
            document.getElementById('messageDisplay')
    );
</script>

<script>

    // Parse the query parameters
    var query_parameters = NUTELLA.parseURLParameters();
    var nutella = NUTELLA.init(query_parameters.run_id, query_parameters.broker, 'monitoring-interface');

    // Nutella request
    nutella.net.request("mail/send", {to: "prova@gmail.com", from: "prova@gmail.com", message: "message"});

    var svg = d3.select("#container");

    // Set background color
    svg.style("background", defaultPalette.background.normal);

    windowViewController.view = svg;
    windowViewController.updateViewBox();

    applicationModel.fetchData("data/data.json");

    /*
    var c = 0;
    window.setInterval(function(){
        console.log("change");
        if(c%4 == 0)
            applicationModel.fetchData("data/data2.json");
        else if(c%4 == 1)
            applicationModel.fetchData("data/data3.json");
        else if(c%4 == 2)
            applicationModel.fetchData("data/data4.json");
        else
            applicationModel.fetchData("data/data.json");
        c++;
    }, 5000);
    */
</script>

</html>